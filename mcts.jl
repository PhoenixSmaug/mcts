const global neighbours = [[1, 5, 6, -1, -1, -1, -1, -1],
                            [0, 2, 5, 6, 7, -1, -1, -1],
                            [1, 3, 6, 7, 8, -1, -1, -1],
                            [2, 4, 7, 8, 9, -1, -1, -1],
                            [3, 8, 9, -1, -1, -1, -1, -1],
                            [0, 1, 6, 10, 11, -1, -1, -1],
                            [0, 1, 2, 5, 7, 10, 11, 12],
                            [1, 2, 3, 6, 8, 11, 12, 13],
                            [2, 3, 4, 7, 9, 12, 13, 14],
                            [3, 4, 8, 13, 14, -1, -1, -1],
                            [5, 6, 11, 15, 16, -1, -1, -1],
                            [5, 6, 7, 10, 12, 15, 16, 17],
                            [6, 7, 8, 11, 13, 16, 17, 18],
                            [7, 8, 9, 12, 14, 17, 18, 19],
                            [8, 9, 13, 18, 19, -1, -1, -1],
                            [10, 11, 16, 20, 21, -1, -1, -1],
                            [10, 11, 12, 15, 17, 20, 21, 22],
                            [11, 12, 13, 16, 18, 21, 22, 23],
                            [12, 13, 14, 17, 19, 22, 23, 24],
                            [13, 14, 18, 23, 24, -1, -1, -1],
                            [15, 16, 21, -1, -1, -1, -1, -1],
                            [15, 16, 17, 20, 22, -1, -1, -1],
                            [16, 17, 18, 21, 23, -1, -1, -1],
                            [17, 18, 19, 22, 24, -1, -1, -1],
                            [18, 19, 23, -1, -1, -1, -1, -1]]

const global neighboursBitmask = [(1 << 1) + (1 << 5) + (1 << 6),
                            (1 << 0) + (1 << 2) + (1 << 5) + (1 << 6) + (1 << 7),
                            (1 << 1) + (1 << 3) + (1 << 6) + (1 << 7) + (1 << 8),
                            (1 << 2) + (1 << 4) + (1 << 7) + (1 << 8) + (1 << 9),
                            (1 << 3) + (1 << 8) + (1 << 9),
                            (1 << 0) + (1 << 1) + (1 << 6) + (1 << 10) + (1 << 11),
                            (1 << 0) + (1 << 1) + (1 << 2) + (1 << 5) + (1 << 7) + (1 << 10) + (1 << 11) + (1 << 12),
                            (1 << 1) + (1 << 2) + (1 << 3) + (1 << 6) + (1 << 8) + (1 << 11) + (1 << 12) + (1 << 13),
                            (1 << 2) + (1 << 3) + (1 << 4) + (1 << 7) + (1 << 9) + (1 << 12) + (1 << 13) + (1 << 14),
                            (1 << 3) + (1 << 4) + (1 << 8) + (1 << 13) + (1 << 14),
                            (1 << 5) + (1 << 6) + (1 << 11) + (1 << 15) + (1 << 16),
                            (1 << 5) + (1 << 6) + (1 << 7) + (1 << 10) + (1 << 12) + (1 << 15) + (1 << 16) + (1 << 17),
                            (1 << 6) + (1 << 7) + (1 << 8) + (1 << 11) + (1 << 13) + (1 << 16) + (1 << 17) + (1 << 18),
                            (1 << 7) + (1 << 8) + (1 << 9) + (1 << 12) + (1 << 14) + (1 << 17) + (1 << 18) + (1 << 19),
                            (1 << 8) + (1 << 9) + (1 << 13) + (1 << 18) + (1 << 19),
                            (1 << 10) + (1 << 11) + (1 << 16) + (1 << 20) + (1 << 21),
                            (1 << 10) + (1 << 11) + (1 << 12) + (1 << 15) + (1 << 17) + (1 << 20) + (1 << 21) + (1 << 22),
                            (1 << 11) + (1 << 12) + (1 << 13) + (1 << 16) + (1 << 18) + (1 << 21) + (1 << 22) + (1 << 23),
                            (1 << 12) + (1 << 13) + (1 << 14) + (1 << 17) + (1 << 19) + (1 << 22) + (1 << 23) + (1 << 24),
                            (1 << 13) + (1 << 14) + (1 << 18) + (1 << 23) + (1 << 24),
                            (1 << 15) + (1 << 16) + (1 << 21),
                            (1 << 15) + (1 << 16) + (1 << 17) + (1 << 20) + (1 << 22),
                            (1 << 16) + (1 << 17) + (1 << 18) + (1 << 21) + (1 << 23),
                            (1 << 17) + (1 << 18) + (1 << 19) + (1 << 22) + (1 << 24),
                            (1 << 18) + (1 << 19) + (1 << 23)]

struct Board
    tiles::Int32
    playerA::Int8
    playerB::Int8
end

"""
Pretty print board
"""
Base.show(io::IO, x::Board) = begin
    turns = 25 - length(replace(bitstring(x.tiles), "0" => ""))

    (turns % 2 == 0) ? println("+--+--+") : println("+-----+")
    for i in 0 : 24
        if (i % 5 == 0)
            print("|")
        end

        if (i == x.playerA)
            (turns % 2 == 0) ? print("1") : print("2")
        elseif (i == x.playerB)
            (turns % 2 == 0) ? print("2") : print("1")
        elseif ((1 << i) & x.tiles != 0)
            print("*")
        else
            print(" ")
        end

        if (i % 5 == 4)
            println("|")
        end
    end
    (turns % 2 == 0) ? println("+--+--+") : println("+-----+")
end

function test()
    b = Board(33554431, 16, 8)
    println(b)
end

test()